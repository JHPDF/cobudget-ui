<div class="draft-page">
  <md-toolbar class="draft-page__toolbar">
    <div class="md-toolbar-tools draft-page__menu-bar">
      <md-button class="md-icon-button" aria-label="Settings" ng-click="back()">
        <div layout="column" layout-align="center center">
          <i class="material-icons draft-page__menu-icon">arrow_back</i>
        </div>
      </md-button>

      <span class="draft-page__personal-funds" layout="row" layout-align="start center" ng-if="status == 'live'">
        <div layout="column" layout-align="center center">
          <i class="material-icons project-page__funds-icon">person</i>
        </div>
        <div layout="column" layout-align="center center">
          <span class="draft-page__funds-overview-header">Your funds</span>
          <!-- <span class="draft-page__funds-overview-amount">{{ group.personalFunds | currency : "$" : 0 }}</span> -->
          <span class="draft-page__funds-overview-amount">$250</span>
        </div>
      </span>

      <span flex></span>

      <md-button class="md-icon-button draft-page-menu-button" aria-label="More" ng-click="toggleStatus()">
        <div layout="column" layout-align="center center">
          <i class="material-icons draft-page__menu-icon">more_vert</i>
        </div>
      </md-button>
    </div>
   </md-toolbar> 

  <md-content class="draft-page__content">
    <md-card class="draft-page__header-card">
      <md-card-content class="draft-page__header-card-content">
        <div class="draft-page__title">{{ draft.name }}</div>
        <div class="draft-page__author">created by {{ draft.author().name }} {{ draft.createdAt | timeFromNowInWords }} ago</div>
      </md-card-content>

      <md-card-content class="draft-page__description-card">
        <div layout="row" ng-if="draft.target > 0">
          <span class="draft-page__description-header">Funding Target</span>
          <span flex="10"></span>
          <span class="draft-page__description-header" flex>{{ draft.target | currency : "$" : 0  }}</span>
        </div>

        <div ng-hide="showFullDescription">
          <p class="draft-page__description-text">{{ draft.description | limitTo:100 }} <span ng-if="draft.description.length > 100">...</span></p>
          <md-button md-no-ink class="md-primary draft-page__more-button" ng-click="readMore()">Read More</md-button>          
        </div>

        <div ng-show="showFullDescription">
          <p class="draft-page__description-text">{{ draft.description }}</p>
          <md-button md-no-ink class="md-primary draft-page__more-button" ng-click="showLess()">Show Less</md-button>
        </div>
      </md-card-content>
    </md-card>

    <md-card class="draftf-page__progress-card" ng-if="status == 'live'">
      <md-card-content class="draft-page__progress-card-content">
        <span class="draft-page__progress-header">Progress</span>

        <md-progress-linear md-mode="determinate" value="{{ draft.percentFunded() }}" class="draft-page__progress-bar"></md-progress-linear>

        <div layout="row" class="draft-page__progress-info">
          <div flex="25">
            <span class="draft-page__progress-amount">{{ draft.numOfContributors }}</span>
            <span class="draft-page__progress-unit">backers</span>
          </div>

          <div flex>
            <span class="draft-page__progress-amount">{{ draft.totalContributions | currency : "$" : 0 }}</span>
            <span class="draft-page__progress-unit">pledged of {{ draft.target | currency : "$" : 0 }}</span>
          </div>

          <div flex="25">
<!--             <span class="draft-page__progress-amount">{{ draft.createdAt | timeFromNowAmount }}</span>
            <span class="draft-page__progress-unit">{{ draft.endsAt | timeFromNowUnits }} left</span> -->
            <span class="draft-page__progress-amount">X</span>
            <span class="draft-page__progress-unit">days left</span>
          </div>
        </div>
      </md-card-content>
    </md-card>

    <md-card class="draft-page__status-card">
      <md-card-content class="draft-page__status-card-content">
        <div class="draft-page__status-header">Status</div>
        <div class="draft-page__status-flagpoints" layout="row" layout-align="space-between center">
          <div class="draft-page__status-flagpoint">
            <div layout="column" layout-align="center center" ng-show="status === 'draft'">
              <i class="material-icons draft-page__draft-icon">radio_button_on</i>
              <span class="draft-page__status-flagpoint-text-active">Draft</span>
            </div>

            <div layout="column" layout-align="center center" ng-hide="status === 'draft'">
              <i class="material-icons">radio_button_off</i>
              <span class="draft-page__status-flagpoint-text-inactive">Draft</span>
            </div>
          </div>

          <div class="draft-page__status-flagpoint-divider" flex></div>

          <div class="draft-page__status-flagpoint">
            <div layout="column" layout-align="center center" ng-show="status === 'live'">
              <i class="material-icons draft-page__live-icon">radio_button_on</i>
              <span class="draft-page__status-flagpoint-text-active">Live</span>
            </div>

            <div layout="column" layout-align="center center" ng-hide="status === 'live'">
              <i class="material-icons">radio_button_off</i>
              <span class="draft-page__status-flagpoint-text-inactive">Live</span>
            </div>
          </div>

          <div class="draft-page__status-flagpoint-divider" flex></div>

          <div class="draft-page__status-flagpoint">
            <div layout="column" layout-align="center center" ng-show="status === 'funded'">
              <i class="material-icons draft-page__funded-icon">radio_button_on</i>
              <span class="draft-page__status-flagpoint-text-active">Funded</span>
            </div>

            <div layout="column" layout-align="center center" ng-hide="status === 'funded'">
              <i class="material-icons">radio_button_off</i>
              <span class="draft-page__status-flagpoint-text-inactive">Funded</span>
            </div>
          </div>

          <div class="draft-page__status-flagpoint-divider" flex></div>

          <div class="draft-page__status-flagpoint">
            <div layout="column" layout-align="center center" ng-show="status === 'done'">
              <i class="material-icons draft-page__done-icon">radio_button_on</i>
              <span class="draft-page__status-flagpoint-text-active">Done</span>
            </div>

            <div layout="column" layout-align="center center" ng-hide="status === 'done'">
              <i class="material-icons">radio_button_off</i>
              <span class="draft-page__status-flagpoint-text-inactive">Done</span>
            </div>
          </div>
        </div>
        <div class="draft-page__status-description">
          <p>
            <em>This project is still being discussed + designed</em>
          </p>
          <p>
            <em>As an administrator or creator, you can approve this project for funding when it is ready</em>
          </p>
          <md-button class="md-raised md-primary">Start Funding</md-button>
        </div>
      </md-card-content>
    </md-card>

    <md-card class="draft-page__discussion-card">
      <md-card-content class="draft-page__discussion-card-content">
        <div class="draft-page__discussion-header" layout="row">
          <span>
            <div layout="column" layout-align="center center">
              Discussion
            </div>
          </span>
          <span flex></span>
          <span>
            <div layout="column" layout-align="center center">
              <i class="material-icons draft-page__comment-count-icon">messenger</i>
              <div class="draft-page__comment-count">{{ draft.comments().length }}</div>
            </div>
          </span>
        </div>

        <form name='commentForm' class="draft-page__comment-form" ng-submit="createComment()">
          <md-input-container>
            <label>Add a comment</label>
            <input name="body" type="text" ng-model="newComment.body">
          </md-input-container>

          <md-input-container class="cob-hidden-submit-button">
            <input type="submit" aria-label="submit">
          </md-input-container>
        </form>

      </md-card-content>

      <md-list>
        <md-list-item class="draft-page__comment" ng-repeat="comment in draft.comments()" layout="column" layout-align="center start">
          <md-divider></md-divider>
          <div class="draft-page__comment-author-name">{{ comment.author().name }}</div>
          <div class="draft-page__comment-body">{{ comment.body }}</div>
        </md-list-item>
      </md-list>

    </md-card>
  </md-content>

</div>