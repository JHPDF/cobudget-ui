<div class="review-bulk-allocation-page" ng-if="authorized">
  <admin-toolbar></admin-toolbar>

  <div class="review-bulk-allocation-page__header" layout="column" layout-align="end center">
    <div layout="row" layout-align="center center">
      <div class="review-bulk-allocation-page__upload-icon-container">
        <ng-md-icon icon="cloud_upload"
        class="review-bulk-allocation-page__upload-icon"
        size="22"
        layout="column"
        layout-align="center center"
        ></ng-md-icon>
      </div>

      <h1 class="review-bulk-allocation-page__header-text">
        Please review & confirm your upload
      </h1>
    </div>
  </div>

  <md-content class="review-bulk-allocation-page__content">
    <h2 class="review-bulk-allocation-page__subheader">
      Overview
    </h2>

    <div class="review-bulk-allocation-page__text-overview">
      Looks like you're trying to do the following to {{ group.name }}:

      <ul class="review-bulk-allocation-page__overview-list">
        <li ng-if="peopleWithPositiveAllocations.length > 0">
          add <b>{{ summedAllocationsFrom(peopleWithPositiveAllocations) | currency : group.currencySymbol }} total</b> to
          <b><ng-pluralize
            count="peopleWithPositiveAllocations.length"
            when="{
              'one': '1 person',
              'other': '{} people'
            }"
          ></ng-pluralize></b>
        </li>

        <li ng-if="peopleWithNegativeAllocations.length > 0">
          subtract <b>{{ summedAllocationsFrom(peopleWithNegativeAllocations) | currency : group.currencySymbol }} total</b> from
          <b><ng-pluralize
            count="peopleWithNegativeAllocations.length"
            when="{
              'one': '1 person',
              'other': '{} people'
            }"
          ></ng-pluralize></b>
        </li>

        <li ng-if="newPeople.length > 0">
          add
          <b><ng-pluralize
            count="newPeople.length"
            when="{
              'one': '1 new person',
              'other': '{} new people'
            }"
          ></ng-pluralize></b>
        </li>
      </ul>
    </div>

    <div layout="column">
      <div layout="row" layout-align="space-between center">
        <div class="review-bulk-allocation-page__list-header">People & status</div>
        <div class="review-bulk-allocation-page__funds-column-container" layout="row" layout-align="start center">
          <div class="review-bulk-allocation-page__list-header">Funds</div>
        </div>
      </div>

      <md-divider class="review-bulk-allocation-page__top-divider"></md-divider>

      <div class="review-bulk-allocation-page__list-row" layout="row" layout-align="space-between start" ng-repeat="person in people">
        <div layout="column" layout-align="start start">
          <div ng-if="person.new_member" class="review-bulk-allocation-page__name-and-email"><b>{{ person.email }}</b></div>
          <div ng-if="!person.new_member" class="review-bulk-allocation-page__name-and-email"><b>{{ person.name }}</b> ( {{ person.email }} )</div>

          <div ng-if="person.new_member" class="review-bulk-allocation-page__invitation-text" layout="row" layout-align="space-between center">
            <ng-md-icon icon="mail"
              class="review-bulk-allocation-page__item-icon"
              layout="column"
              layout-align="center center"
            ></ng-md-icon>
            <div>Invitation Ready</div>
          </div>
        </div>

        <div class="review-bulk-allocation-page__funds-column-container" layout="row" layout-align="space-between center">
          <div class="review-bulk-allocation-page__funds-amount"
            ng-class="person.allocation_amount >= 0 ? 'review-bulk-allocation-page__funds-positive-amount' : 'review-bulk-allocation-page__funds-negative-amount'"
          >
            <span class="review-bulk-allocation-page__funds-sign">{{ person.allocation_amount >= 0 ? '+' : '-'}}</span>
            {{ abs(person.allocation_amount) | currency : group.currencySymbol }}
          </div>

          <div>
            <ng-md-icon
              icon="more_vert"
              layout="column"
              layout-align="center center"
              class="group-page__funder-more-button-icon"
            ></ng-md-icon>
          </div>
        </div>
      </div>
    </div>

    <md-divider class="review-bulk-allocation-page__bottom-divider"></md-divider>

    <div layout="column" layout-align="center space-between">
      <md-button class="review-bulk-allocation-page__btn review-bulk-allocation-page__confirm-btn">Confirm</md-button>
      <md-button class="review-bulk-allocation-page__btn review-bulk-allocation-page__try-again-btn" ng-click="openUploadCSVPrimerDialog()">Try Again</md-button>
      <md-button class="review-bulk-allocation-page__btn review-bulk-allocation-page__cancel-btn" ng-click="cancel()">Cancel</md-button>
    </div>
  </md-content>
</div>
