<div class="group-page__buckets-content">
  <md-card class="group-page__buckets-card">
    <md-list class="group-page__buckets-list" ng-if="group.liveBuckets().length > 0">
      <div layout="row" layout-align="start center" class="group-page__buckets-list-header-container">
        <img ng-src="./img/blue_dollar.svg" alt="blue dollar bill" class="group-page__bucket-list-icon"/>
        <md-subheader class="group-page__subheader-title">Funding Now</md-subheader>
      </div>

      <md-divider class="group-page__buckets-divider"></md-divider>

      <md-list-item md-no-ink ng-repeat="liveBucket in group.liveBuckets()" ng-click="showBucket(liveBucket.id)" class="group-page__buckets-list-item">
        <div layout="column" flex class="group-page__bucket-container">
          <span class="group-page__bucket-title">{{ liveBucket.name }}</span>

          <div layout="row" layout-align="space-between center">
            <span class="group-page__bucket-subheader">{{ liveBucket.amountRemaining() | currency : group.currencySymbol : 0  }} to go</span>

            <span ng-show="liveBucket.amountContributedByUser(currentUser) > 0" class="group-page__live-bucket-personal-contribution">
              You gave {{ liveBucket.amountContributedByUser(currentUser) | currency : group.currencySymbol : 0 }}
            </span>
          </div>

          <div class="group-page__progress-bar-container">
            <div class="group-page__progress-bar-primary" style="width: {{ liveBucket.percentContributedByOthers(currentUser) }}%"></div>
            <div class="group-page__progress-bar-secondary" style="width: {{ liveBucket.percentContributedByUser(currentUser) + liveBucket.percentContributedByOthers(currentUser) }}%"></div>
          </div>

          <div class="group-page__comment-count-container">
            <ng-md-icon
            icon="messenger"
            layout="column"
            layout-align="center center"
            ng-class="liveBucket.hasComments() ? 'group-page__comment-icon-active' : 'group-page__comment-icon-inactive'"
            ></ng-md-icon>

            <div class="group-page__comment-count" ng-if="liveBucket.hasComments()">
              {{ liveBucket.numOfComments }}
            </div>
          </div>
        </div>
      </md-list-item>
    </md-list>
  </md-card>

  <md-card class="group-page__buckets-card">
    <md-list class="group-page__buckets-list" ng-if="group.draftBuckets().length > 0">
      <div layout="row" layout-align="start center" class="group-page__buckets-list-header-container">
        <img ng-src="./img/lightbulb.svg" alt="lightbulb" class="group-page__bucket-list-icon"/>
        <md-subheader class="group-page__subheader-title">Ideas</md-subheader>
      </div>

      <md-divider class="group-page__buckets-divider"></md-divider>

      <md-list-item md-no-ink ng-repeat="draftBucket in group.draftBuckets()" ng-click="showBucket(draftBucket.id)" class="group-page__buckets-list-item">
        <div layout="column" flex class="group-page__draft-container">
          <span class="group-page__bucket-title">{{ draftBucket.name }}</span>
          <span class="group-page__bucket-subheader">created by {{ draftBucket.authorName }} {{ draftBucket.createdAt | timeFromNowInWords }} ago</span>

          <div class="group-page__comment-count-container">
            <ng-md-icon
            icon="messenger"
            layout="column"
            layout-align="center center"
            ng-class="draftBucket.hasComments() ? 'group-page__comment-icon-active' : 'group-page__comment-icon-inactive'"
            ></ng-md-icon>

            <div class="group-page__comment-count" ng-if="draftBucket.hasComments()">
              {{ draftBucket.numOfComments }}
            </div>
          </div>
        </div>
      </md-list-item>
    </md-list>
  </md-card>

  <md-card class="group-page__buckets-card">
    <md-list class="group-page__buckets-list" ng-if="group.fundedBuckets().length > 0">
      <div layout="row" layout-align="start center" class="group-page__buckets-list-header-container">
        <ng-md-icon icon="check_circle"
          layout="column"
          layout-align="center center"
          size="27"
          class="group-page__bucket-list-icon group-page__bucket-list-funded-icon"
        ></ng-md-icon>
        <md-subheader class="group-page__subheader-title">Funded</md-subheader>
      </div>

      <md-divider class="group-page__buckets-divider"></md-divider>

      <md-list-item md-no-ink ng-repeat="fundedBucket in group.fundedBuckets()" ng-click="showBucket(fundedBucket.id)" class="group-page__buckets-list-item">
        <div layout="column" flex class="group-page__bucket-container">
          <span class="group-page__bucket-title">{{ fundedBucket.name }}</span>
          <span class="group-page__bucket-subheader">created by {{ fundedBucket.authorName }} {{ fundedBucket.createdAt | timeFromNowInWords }} ago</span>
        </div>
      </md-list-item>
    </md-list>
  </md-card>

  <md-card class="group-page__buckets-card">
    <md-list class="group-page__buckets-list" ng-if="group.archivedBuckets().length > 0 && showArchivedBuckets">
      <div layout="row" layout-align="start center" class="group-page__buckets-list-header-container">
        <md-subheader class="group-page__subheader-title">Archived</md-subheader>
      </div>

      <md-divider class="group-page__buckets-divider"></md-divider>

      <md-list-item md-no-ink ng-repeat="archivedBucket in group.archivedBuckets()" ng-click="showBucket(archivedBucket.id)" class="group-page__buckets-list-item">
        <div layout="column" flex class="group-page__bucket-container">
          <span class="group-page__bucket-title">{{ archivedBucket.name }}</span>
          <span class="group-page__bucket-subheader">created by {{ archivedBucket.authorName }} {{ archivedBucket.createdAt | timeFromNowInWords }} ago</span>
        </div>
      </md-list-item>
    </md-list>
  </md-card>

  <div class="group-page-buckets__archived-buckets-btn-container" layout="row" ng-if="group.archivedBuckets().length > 0">
    <div class="group-page-buckets__archived-buckets-btn" layout="row" layout-align="center center" ng-click="toggleArchivedBuckets()">
      <ng-md-icon icon="archive"
        layout="column"
        layout-align="center center"
        class="group-page-buckets__archived-buckets-btn-icon"
      ></ng-md-icon>

      <div class="group-page-buckets__archived-buckets-btn-label">
        {{ showArchivedBuckets ? 'Hide' : 'Show' }} Archived Buckets
      </div>
    </div>
  </div>
</div>
