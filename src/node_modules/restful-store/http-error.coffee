inherits = require('inherits')
debug = require('debug')("restful-store:HttpError")
_ = require('lodash')

# TODO split up this error class
# into many separate error classes
# http://dailyjs.com/2014/01/30/exception-error/
HttpError = (httpErr) ->
  debug(httpErr)

  Error.call(this)
  if Error.captureStackTrace
    Error.captureStackTrace(this, this.constructor)

  this.name = "HttpError"

  if _.isNull(httpErr.data) and httpErr.status == 0
    this.message = "Server did not respond."
  else
    this.message = "
      An unexpected http error has occurred.
      Details: #{ JSON.stringify(httpErr, null, 2) }
    "

inherits(HttpError, Error)

module.exports = HttpError
