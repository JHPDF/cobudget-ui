### @ngInject ###
module.exports = ($stateProvider, $urlRouterProvider) ->

  # redirect from old to new layout.round.buckets url
  $urlRouterProvider.when /(.*)\/buckets/i, ($match) ->
    return $match[1]

  $stateProvider.state 'layout', require('layout')
  $stateProvider.state 'layout.person', require('person-page')
  $stateProvider.state 'layout.person.profile', require('person-profile')
  $stateProvider.state 'layout.person.settings', require('person-settings')
  $stateProvider.state 'layout.group', require('group-page')
  $stateProvider.state 'layout.group.rounds', require('group-rounds')
  $stateProvider.state 'layout.group.members', require('group-members')
  $stateProvider.state 'layout.round', require('round-page')
  $stateProvider.state 'layout.round.buckets', require('round-buckets')
  $stateProvider.state 'layout.round.buckets.details', require('round-buckets/round-buckets-details.coffee')
  $stateProvider.state 'layout.round.contributors', require('round-contributors')

  $urlRouterProvider.otherwise ($injector, $location) ->
    search = $location.url().split('?')[1] || ''
    return '/?' + search
