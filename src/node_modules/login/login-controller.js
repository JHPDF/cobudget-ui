var debug = require('debug')('login:login-controller');

/* @ngInject */
module.exports = function ($scope, $modalInstance, AuthService, login) {

  $scope.user = {};

  $scope.submit = function (loginForm) {
    $scope.submitted = true

    if (loginForm.$invalid) {
      return;
    }
    debug("logging in", $scope.user);

    AuthService.login($scope.user)
    .then(function () {
      debug("logged in");
      $modalInstance.close();
    }, function (err) {
      debug("error logging in", err);
      $modalInstance.dismiss(err);
    })
  };

  $scope.cancel = function () {
    debug("cancel");
    $modalInstance.dismiss(null)
  };

  $scope.forgotLogin = function () {
    debug("open forgot login modal");
    login.openForgotLogin();
  };

}
