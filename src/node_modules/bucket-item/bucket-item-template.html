<a ui-sref="layout.round.buckets.details({ groupId: group.id, bucketId: bucket.id })">
  <div class="bucket item row" ng-class="{ selected: selected }">

    <div class="col-xs-12">
      <p class="name">{{ bucket.name }}</p>
    </div>

    <div class="col-md-10 col-sm-9 col-xs-8">
      <div class="progress">
        <div class="group progress-bar"
            role="progressbar"
            aria-valuenow="{{bucket.percentageFunded.gt(0) ? bucket.groupContributionPercentage.toString() : ''}}"
            aria-valuemin="0"
            aria-valuemax="100"
            style="width: {{ bucket.groupContributionPercentage.times(100).toString() }}% ;">
          <span class="sr-only">{{ bucket.groupContributionPercentage.toString() }}% Complete</span>
        </div>

        <div contribution-status="round.balanceStatus"
            class="my progress-bar"
            role="progressbar"
            aria-valuenow="{{bucket.percentageFunded.gt(0) ? bucket.myContributionPercentage.toString() : ''}}"
            aria-valuemin="0"
            aria-valuemax="100"
            style="width: {{ model.myContributionPercentageMaxed }}%;">
          <span class="sr-only">{{ model.myContributionPercentageMaxed }}% Complete</span>
        </div>
      </div>

      <div class="clearfix">
        <div class="equation">
          <span class="groupContribution">${{ bucket.groupContribution.toString() }}</span>
          <span class="groupPlusMy">+</span>
          <span contribution-status="round.balanceStatus" class="myContribution">${{ bucket.myContribution.amount.toString() }}</span>
          <span class="equalsTotal">=</span>
          <span class="amountFunded">${{ bucket.groupContribution.plus(bucket.myContribution.amount).toString() }}</span>
        </div>
        <span class="target" ng-if="bucket.target.gt(0)">${{ bucket.target.toString() }}</span>
      </div>
    </div>

    <div class="col-md-2 col-sm-3 col-xs-4">
      <div class="contribution" ng-class="{ inactive: model.readonly, contributing: model.contributing, ready: model.inputStatus == 'ready', unsaved: model.inputStatus == 'unsaved', saving: model.inputStatus == 'saving', saved: model.inputStatus == 'saved'}" contribution-status="round.balanceStatus">

        <span ng-if="model.inputStatus == 'ready'" ng-click="model.startContributing($event)" class="btn">Fund</span>

        <div ng-if="model.inputStatus == 'unsaved'" class="amount-group">
          <span class="currency">$</span>
          <input type="number" min="0" max="{{ round.balanceStatus !== 'success' ? (round.myAllocationAmount ? myAllocationAmount : '') : model.myContributionAmount }}" ng-model='model.myContributionAmount' placeholder="0" ng-blur='model.saveContribution(bucket.myContribution)' ng-readonly="model.readonly" class="amount" ng-keydown="model.handleKeyDown($event)">
        </div>

        <div ng-if="model.inputStatus == 'saving'" class="amount-group">
          <span class="currency">$</span>
          <input type="number" ng-model='model.myContributionAmount' readonly="readonly" class="amount">
        </div>

        <div ng-if="model.inputStatus == 'saved'" class="amount-group">
          <span class="currency">$</span>
          <span class="amount" ng-click="!model.readonly ? model.startContributing($event) : null">
            {{ model.myContributionAmount }}
          </span>
        </div>
      </div>
    </div>


  </div>
</a>
