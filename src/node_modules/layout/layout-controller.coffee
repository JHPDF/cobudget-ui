debug = require('debug')("layout")

### @ngInject ###
module.exports = ($scope, GroupsStore, authModel, groups) ->
  $scope.groups = groups || []

  authModel.on "login success", ->
    debug("login success, fetching groups")
    GroupsStore.all(memberId: authModel.id).then (groups) ->
      $scope.groups = groups

  authModel.on "logout success", ->
    debug("logout success, clearing groups")
    $scope.groups = []
