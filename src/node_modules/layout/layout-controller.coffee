debug = require('debug')("layout")

### @ngInject ###
module.exports = ($scope, $state, $stateParams, authModel, groups) ->
  $scope.groups = groups || []

  authModel.set('resetPasswordToken', $stateParams.reset_password_token)

  authModel.on "login-success", ->
    debug("login success, fetching groups")
    $state.reload()

  authModel.on "logout-success", ->
    debug("logout success, clearing groups")
    $scope.groups = []
    $state.reload()
