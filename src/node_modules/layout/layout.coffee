### @ngInject ###
module.exports = {
  url: ''
  template: require('./layout-template.html')
  controller: require('./layout-controller.coffee')
  resolve:
    groups: ($q, GroupsStore, authModel, login, $urlRouter) ->
      if authModel.id
        GroupsStore.all(memberId: authModel.id)
          .then null, (err) ->
            if (err.name == "ForbiddenError")
              # bad cookie
              login.logout()
              $urlRouter.sync()
            else
              $q.reject(err)
      else
        login.openLogin()
}
