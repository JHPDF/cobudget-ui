### @ngInject ###
module.exports = {
  url: ''
  template: require('./layout-template.html')
  controller: require('./layout-controller.coffee')
  resolve:
    groups: ($q, GroupsStore, AuthService) ->
      user = AuthService.getCurrentUser()
      if user
        GroupsStore.all(memberId: user.id)
          .then null, (err) ->
            if (err.name == "ForbiddenError")
              # bad cookie
              AuthService.logout()
              AuthService.loginModalCtrl.open()
            else
              $q.reject(err)
      else
        AuthService.loginModalCtrl.open()
}
