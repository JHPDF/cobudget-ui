_ = require('lodash')

### @ngInject ###
module.exports = {
  abstract: true
  url: 'people/:personId'
  template: require('./person-page-template.html')
  controller: require('./person-page-controller.coffee')
  resolve:
    person: ($stateParams, UsersStore) ->
      # UsersStore.get is not implemented on the API
      UsersStore.all().then (people) ->
        _.find people, { id: Number($stateParams.personId) }
}
