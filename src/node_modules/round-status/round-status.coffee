module.exports = ->

  statusFn = (scope, element, attrs) ->

    scope.$watch "round.myAllocationLeft", (myAllocationLeft) ->
      element.removeClass("my-allocation-more my-allocation-done my-allocation-error")
      if myAllocationLeft.gt(0)
        element.addClass("my-allocation-more")
      else if myAllocationLeft.eq(0)
        element.addClass("my-allocation-done")
      else
        element.addClass("my-allocation-error")
    , true

    scope.$watch "round.status.name", (status) ->
      element.removeClass("pending-round contribution-round closed-round")
      if status == "pending"
        element.addClass("pending-round")
      else if status == "open"
        element.addClass("contribution-round")
      else if status == "closed"
        element.addClass("closed-round")
    , true

  return {
      restrict: 'EA',
      link: statusFn
  }
