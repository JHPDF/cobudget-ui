/* @ngInject */
module.exports = function (authCookie, UserModel) {
  return UserModel.extend({

    props: {
      accessToken: 'string',
      initialized: 'boolean',
    },

    initialize: function () {
      this.set(authCookie.get());
      UserModel.prototype.initialize.apply(this, arguments);
    },

    set: function () {
      UserModel.prototype.set.apply(this, arguments);
      authCookie.put(this.toJSON())
    },

    clear: function () {
      authCookie.del();
      UserModel.prototype.clear.apply(this, arguments);
    },
  });
};
