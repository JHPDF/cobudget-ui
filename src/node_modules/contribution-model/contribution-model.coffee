Decimal = require('decimal')

### @ngInject ###
module.exports = (UserModel) ->
  class ContributionModel
    constructor: (data = {}) ->
      @id = data.id
      @amount = new Decimal(data.amount or 0)
      @bucketId = data.bucketId or data.bucket and data.bucket.id
      @user = new UserModel(data.user)

    serialize: ->
      return {
        id: @id,
        amount: @amount.toFixed(2)
        bucketId: @bucketId
        user: @user.serialize()
      }
