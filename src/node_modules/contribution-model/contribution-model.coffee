Decimal = require('big.js')

### @ngInject ###
module.exports = (UserModel) ->
  class ContributionModel
    constructor: (data = {}) ->
      @id = data.id
      @amount = new Decimal(data.amountCents or 0).div(100)
      @bucketId = data.bucketId or data.bucket and data.bucket.id
      @user = new UserModel(data.user)

    serialize: ->
      return {
        id: @id,
        amountCents: @amount.times(100).toFixed(0)
        bucketId: @bucketId
        user: @user.serialize()
      }
