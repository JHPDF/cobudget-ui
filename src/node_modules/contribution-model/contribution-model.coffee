### @ngInject ###
module.exports = (UserModel) ->
  class ContributionModel
    constructor: (data = {}) ->
      @id = data.id
      @amountCents = data.amountCents
      @bucketId = data.bucketId or data.bucket and data.bucket.id
      @user = new UserModel(data.user)

      Object.defineProperty(@, "amount", {
        get: ->
          @amountCents / 100.0
        set: (amount) ->
          @amountCents = amount * 100
      })

    serialize: ->
      return {
        id: @id,
        amountCents: @amountCents
        bucketId: @bucketId
        user: @user.serialize()
      }
