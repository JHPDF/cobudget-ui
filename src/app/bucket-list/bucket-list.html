<div class="row content-row">
  <div class="col-md-6 buckets panel container">

    <header class="" ng-if='currentBudget'>
      <div class="row section titles">
        <span class="col-md-4 yourFunds">YOUR FUNDS</span>
        <span class="col-md-4 groupFunds">GROUP FUNDS</span>
        <span class="col-md-4 timeLeft">TIME LEFT</span>
      </div>

      <div class="row section details">
        
        <div class="col-md-4 yourDetails">
          <span class="large">
            $315
            <span class="small">/$450</span>
          </span>
        </div>
        
        <div class="col-md-4 groupDetails">
          <span class="large">
            ${{round.total_allocated}}
            <span class="small">/${{round.total_allocable}}</span>
          </span>
        </div>

        <div class="col-md-4 timeDetails">
          <span class="large">
            {{round.time_left_days}}
            <span class="small">DAYS</span>
          </span>
        </div>  

      </div>

    </header>

    <div class="bucket-list" ng-repeat="bucket in round.buckets">
      <div class="bucket" ng-if='currentBudget'>
        <div class="allocation_amount allocated">
        <!--<label>Allocate</label>-->
        <input type="number" ng-model='bucket.my_contribution.amount_cents' placeholder="0" ng-blur='saveContribution(bucket.my_contribution)'>
        </div>

        <h2><a href='#/groups/{{groupId}}/buckets/{{bucket.id}}'>{{bucket.name}}</a></h2>


        <div class="progress">
          <!--Got a hacky fix for progress bars here... PB cant be 0, must be empty -->
          <div id="bucket-{{bucket.id}}"
               class="progress-bar" role="progressbar"
               aria-valuenow="{{bucket.percentage_funded > 0 ? bucket.percentage_funded : ''}}"
               aria-valuemin="0"
               aria-valuemax="100"
               style="width: {{ bucket.percentage_funded}}%;">
            <span class="sr-only">{{ bucket.percentage_funded}}% Complete</span>
          </div>
        </div>

        <span style="float: left; margin-left: {{ angular.element('#bucket-#{bucket.id}').width() * bucket.percentage_funded }}px">${{ bucket.contribution_total_cents / 100 }}</span>
        <span ng-if="bucket.target_cents > 0" style="float: right">${{ bucket.target_cents / 100 }}</span>
      </div>
    </div>

  </div>

  <div ui-view></div>
</div>